<!DOCTYPE html>
<html>
<head>
	<title>async</title>
</head>
<body>


	<script type="text/javascript">
		//////
		// async:
		// 		简化异步操作，作为Generator的语法糖。
		// 
		// 优势：
		// 		1. Generator必须依赖内置执行器, co模块。async 函数自带执行器。与普通函数相同。
		// 		2. 更好的语义。async, await;
		// 		3. 更广的适用行, yield只能是Thunk函数或Promise对象。而await后可以是Promise，也可以是原始值(这时等同与同步操作)
		// 		4. 返回值是Promise,这比 Generator 函数的返回值是 Iterator 对象方便多了. async函数完全可以看作多个异步操作，包装成的一个 Promise 对象，而await命令就是内部then命令的语法糖。
		// 
		// 
		// 使用：
		// 		1. 基本语法
		//////

		// 基本语法：
		//  返回Promise对象，遇到awiat会先返回。等到异步操作完成再接着执行函数体后的内容。
		//  
		function timeOut(str, s){
			return setTimeout(function(){
				console.info(str);
			}, s);
		}
		async function a1(str){
			console.info('1');
			const a = await timeOut('2', 1000);
			console.info('3');
			const b = await timeOut('4', 2000);
			console.info('5');
			const c = await timeOut('6', 1500);
			console.info('6');
			return str;
		}
		a1('its over').then((result) => {
			console.info('result' + ' !');
		});

	</script>
</body>
</html>